<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Using a React component in a block widget - CKEditor 5 Documentation</title>
    <meta name="description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:card" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta name="twitter:site" content="@ckeditor">
    <meta name="x-generated-at" content="Fri Dec 23 2022 03:26:09 GMT+0000 (Coordinated Universal Time)">
    <meta property="og:title" content="Using a React component in a block widget - CKEditor 5 Documentation">
    <meta property="og:description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ckeditor.com/docs/ckeditor5/latest/examples/framework/using-react-in-a-widget.html">
    <meta property="DC.language" content="en">
    <meta property="DC.publisher" content="CKSource">
    <meta property="DC.creator" content="CKEditor">
    <meta property="DC.title" content="Using a React component in a block widget - CKEditor 5 Documentation">
    <meta property="DC.format" content="text/html">
    <meta property="DC.type" content="Text">
    <meta property="DC.description" content="Learn how to install, integrate and configure CKEditor 5 Builds and how to work with CKEditor 5 Framework, customize it, create your own plugins and custom editors, change the UI or even bring your own UI to the editor. API reference and examples included.">
    <link rel="canonical" href="https://ckeditor.com/docs/ckeditor5/latest/examples/framework/using-react-in-a-widget.html">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/16x16.png" sizes="16x16">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="../../assets/img/favicons/96x96.png" sizes="96x96">
    <link rel="apple-touch-icon" type="image/png" href="../../assets/img/favicons/200x200.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css">
    <link rel="stylesheet" href="../../../../assets/2.2.0/css/styles.css" type="text/css" media="all">
    <link rel="stylesheet" href="../../assets/styles.css" type="text/css">
    <link rel="stylesheet" href="../../snippets/framework/tutorials/using-react-in-widget/snippet.css" type="text/css" data-cke="true">
    <link rel="stylesheet" href="../../assets/snippet-styles.css" type="text/css" data-cke="true">
    <link rel="stylesheet" href="../../snippets/assets.css" type="text/css" data-cke="true">
    <script>if ( ["ckeditor5.github.io"].indexOf( location.hostname ) !== -1 ) {
      	function pageView() {
      		ga( 'send', 'pageview', location.pathname + location.search + location.hash );
      	}
      
      	(function( i, s, o, g, r, a, m ) {
      		i[ 'GoogleAnalyticsObject' ] = r;
      		i[ r ] = i[ r ] || function() {
      				(i[ r ].q = i[ r ].q || []).push( arguments )
      			}, i[ r ].l = 1 * new Date();
      		a = s.createElement( o ),
      			m = s.getElementsByTagName( o )[ 0 ];
      		a.async = 1;
      		a.src = g;
      		m.parentNode.insertBefore( a, m )
      	})( window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga' );
      
      	ga( 'create', {"trackingId":"UA-271067-19","cookieDomain":"ckeditor5.github.io"} );
      
      	pageView();
      
      	window.addEventListener( 'hashchange', pageView );
      }
    </script>
  <meta name="generator" content="Hexo 6.3.0"></head>
  <body>
    <header class="top" data-project="ckeditor5">
      <div class="header__main">
        <div class="header__main-rwd-button"><a href="#"><span></span><span></span><span></span></a></div>
        <div class="header__main-title"><a class="header__main-title-home" href="../../../../index.html">CKEditor Ecosystem Documentation</a></div>
        <div class="top__search">
          <input class="top__search__box" type="text" id="docsearch_input" placeholder="Search in CKEditor 5">
          <div class="top__search__button"><img src="../../../../assets/2.2.0/img/loupe.svg" alt="Search"></div>
        </div>
      </div>
      <div class="header__sub">
        <ul class="top__menu">
          <li class="top__menu-project-logo"><a href="../../index.html">CKEditor 5</a></li>
          <li><a href="../../installation/index.html">Getting started</a></li>
          <li><a href="../../features/index.html">Features</a></li>
          <li><a class="top__menu__item--active" href="../index.html">Examples</a></li>
          <li><a href="../../updating/index.html">Updating</a></li>
          <li><a href="../../support/index.html">Support</a></li>
          <li><a href="../../framework/index.html">Framework</a></li>
          <li><a class="top__menu__api" href="../../api/index.html">API</a></li>
          <li><a class="top__menu-github-link" href="https://github.com/ckeditor/ckeditor5" target="_blank" title="CKEditor 5 on GitHub."><svg viewBox="0 0 24 24"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a></li>
        </ul>
      </div>
      <div class="header__menu-rwd">
        <ul class="header__menu-rwd__projects">
          <li data-project="ckeditor5"><a href="../../../latest/index.html">CKEditor 5</a>
            <ul class="tree header__menu-rwd__projects-pages">
              <li data-group="installation"><a href="../../installation/index.html">Getting started</a>
              </li>
              <li data-group="features"><a href="../../features/index.html">Features</a>
              </li>
              <li data-group="examples"><a href="../index.html">Examples</a>
                <ul class="header__menu-rwd__projects-subpages">
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Predefined builds</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="../builds/classic-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Classic editor</span>
                                      </div></a></li>
                                  <li><a href="../builds/inline-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Inline editor</span>
                                      </div></a></li>
                                  <li><a href="../builds/balloon-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Balloon editor</span>
                                      </div></a></li>
                                  <li><a href="../builds/balloon-block-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Balloon block editor</span>
                                      </div></a></li>
                                  <li><a href="../builds/document-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Document editor</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Custom builds</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="../builds-custom/full-featured-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Full-featured editor</span>
                                      </div></a></li>
                                  <li><a href="../builds-custom/bottom-toolbar-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Bottom toolbar with formatting options grouped</span>
                                      </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Framework</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                  <li><a href="chat-with-mentions.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Chat with mentions</span>
                                      </div></a></li>
                                  <li><a href="theme-customization.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Theme customization</span>
                                      </div></a></li>
                                  <li><a href="custom-ui.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom UI (with Bootstrap)</span>
                                      </div></a></li>
                                  <li><a href="multi-root-editor.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Multi-root editor</span>
                                      </div></a></li>
                                  <li><a href="data-from-external-source.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Data from an external source</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                      </div></a></li>
                                  <li><a href="">
                                      <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Using a React component in a block widget</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                      </div></a></li>
                                  <li><a href="inline-widget.html">
                                      <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Inline widget</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                      </div></a></li>
                            </ul>
                          </li>
                </ul>
              </li>
              <li data-group="updating"><a href="../../updating/index.html">Updating</a>
              </li>
              <li data-group="support"><a href="../../support/index.html">Support</a>
              </li>
              <li data-group="framework"><a href="../../framework/index.html">Framework</a>
              </li>
              <li data-group="api-reference"><a href="../../api/index.html">API</a>
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </header>
    <main class="main">
      <section class="main__content formatted main__content--no-toc">
        <div class="main__content-inner">
          <div class="github-contrib"><a href="https://github.com/ckeditor/ckeditor5/blob/master/docs/examples/framework/using-react-in-a-widget.md" title="Contribute to this guide"><img src="../../../../assets/2.2.0/img/edit.svg" alt="Contribute to this guide"></a>
          </div>
          <div class="rwd-breadcrumbs"><a href="../../../../index.html">Home</a><span class="rwd-breadcrumbs__separator">/</span><a href="../../index.html">CKEditor 5</a><span class="rwd-breadcrumbs__separator">/</span><a href="../index.html">Examples</a>
          </div>
          <h1 class="main__content-title"><img src="../../../../assets/2.2.0/img/book.svg" alt="guide">Using a React component in a block widget
          </h1>
<p>The editor below presents integration between React library and a block widget from the CKEditor ecosystem. In the example, the React component renders a list of products you can add to the editor content.</p>
<div class="live-snippet"><style>
/* assets/styles.css */

/* --- General application styles --------------------------------------------------- */

.app {
	display: flex;
	flex-direction: row;
	justify-content: center;
}

.app textarea {
	width: 100%;
	height: 300px;
	font-family: 'Courier New', Courier, monospace;
	box-sizing: border-box;
	font-size: 14px;
}

/* --- Product offer editor styles ----------------------------------------------------- */

.app .app__offer-editor {
	flex: 1 1 auto;
}

/* --- Generic product preview styles --------------------------------------------------- */

.app .product-preview {
	background-repeat: no-repeat;
	background-position: center;
	background-image: var(--product-image);
	background-size: cover;
	height: 120px;
	position: relative;
	overflow: hidden;
	box-shadow: 1px 1px 3px hsla(0, 0%, 0%, .3);
	min-width: 120px;
}

.app .product-preview .product-preview__name {
	padding: 10px;
	background: hsl(0, 0%, 100%);
	font-weight: bold;
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
	line-height: 1.5em;
}

.app .product-preview .product-preview__price {
	position: absolute;
	top: 0;
	right: 0;
	display: block;
	background: hsl(346, 100%, 56%);
	padding: 6px 10px;
	min-width: 50px;
	text-align: center;
	color: hsl(0, 0%, 100%);
	text-transform: uppercase;
	font-size: .8em;
	line-height: 1.5em;
}

.app .product-preview .product-preview__add {
	display: none;
}

/* --- Product list styles --------------------------------------------------- */

.app .app__product-list {
	margin-left: 20px;
	padding: 0 20px;
	border-left: 1px solid hsl(0, 0%, 87%);
}

.app .app__product-list ul {
	display: grid;
	grid-template-columns: 1fr;
	grid-gap: 10px;
	list-style-type: none;
	margin: 1.5em 0;
	padding: 0;
}

.app .app__product-list .product-preview {
	opacity: .7;
}

.app .app__product-list .product-preview:hover {
	opacity: 1;
}

.app .app__product-list .product-preview:hover .product-preview__add {
	display: block;
}

.app .app__product-list .product-preview .product-preview__add {
	display: none;
	position: absolute;
	width: 40px;
	height: 40px;
	top: 45%;
	left: 50%;

	border: 0;
	padding: 0;
	cursor: pointer;
	font-weight: bold;
	text-align: center;
	border-radius: 100px;
	background: hsl(0, 0%, 100%);
	transform: translate(-50%, -50%);
	box-shadow: 2px 2px 2px hsla(0, 0%, 0%, .3);
}

.app .app__product-list .product-preview .product-preview__add span {
	font-size: 25px;
	vertical-align: middle;
	color: hsl(0, 0%, 24%);
	line-height: 40px;
	display: inline-block;
}

.app .app__product-list .product-preview .product-preview__name {
	font-size: 10px;
}

.app .app__product-list .product-preview .product-preview__price {
	font-size: 10px;
}

/* --- In-editor product widget styles --------------------------------------------------- */

.app .ck-content .product {
	margin: 1em;
	animation: slideUp 0.3s ease;
}

@keyframes slideUp {
	0% {
		opacity: 0;
		transform: translateY(1em);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}
</style>

<div id="snippet-react-in-widget">
	<div class="app"></div>
</div>

<script type="text/babel">
// react/productpreview.js

class ProductPreview extends React.Component {
	render() {
		const style = {
			'--product-image': `url(${ this.props.image })`
		};

		return <div
			className="product-preview"
			style={style}>
				<button
					className="product-preview__add"
					onClick={() => this.props.onClick( this.props.id )}
					title="Add to the offer"
				>
					<span>+</span>
				</button>
				<span className="product-preview__name">{this.props.name}</span>
				<span className="product-preview__price">from {this.props.price}</span>
			</div>
	}
}

// react/productlist.js

class ProductList extends React.Component {
	render() {
		return <div className="app__product-list">
			<h3>Products</h3>
			<ul>
				{this.props.products.map( product => {
					return <li key={product.id}>
						<ProductPreview
							id={product.id}
							onClick={this.props.onClick}
							{...product}
						/>
					</li>;
				})}
			</ul>
			<p><b>Tip</b>: Clicking the product will add it to the editor.</p>
		</div>;
	}
}

// app.js

// The React application class. It renders the editor and the product list.
class App extends React.Component {
	constructor( props ) {
		super( props );

		// A place to store the reference to the editor instance created by the <CKEditor> component.
		// The editor instance is created asynchronously and is only available when the editor is ready.
		this.editor = null;

		this.state = {
			// The initial editor data. It is bound to the editor instance and will change as
			// the user types and modifies the content of the editor.
			editorData: '<h2>Check out our last-minute deals!</h2><p>The capital city of <a href="https://en.wikipedia.org/wiki/Malta">Malta</a> is the top destination this summer. It’s home to cutting-edge contemporary architecture, baroque masterpieces, delicious local cuisine, and at least 8 months of sun.</p><section class="product" data-id="2"></section><p>You’ll definitely love exploring <a href="https://en.wikipedia.org/wiki/Warsaw">Warsaw</a>! The best time to visit the city is July and August when it’s cool enough to not break a sweat and hot enough to enjoy summer. The city which has quite a combination of both old and modern textures is located by the river Vistula.</p><section class="product" data-id="1"></section><h3>Other destinations</h3><figure class="table"><table><thead><tr><th>Destination</th><th>Trip details</th></tr></thead><tbody><tr><td><section class="product" data-id="3"></section><p>&nbsp;</p></td><td>Getting used to an entirely different culture can be challenging. While it’s also nice to learn about cultures online or from books, nothing comes close to experiencing cultural diversity in person. You learn to appreciate each and every single one of the differences while you become more culturally fluid. <a href="http://ckeditor.com">Find out more...</a></td></tr><tr><td><section class="product" data-id="4"></section><p>&nbsp;</p></td><td>Tourists frequently admit that the Taj Mahal "simply cannot be described with words". And that’s probably true. The more you try the more speechless you become. Words give only a semblance of truth. <a href="http://ckeditor.com">Find out more...</a></td></tr></tbody></table></figure>'
		};

		// The configuration of the <CKEditor> instance.
		this.editorConfig = {
			plugins: [
				// A set of editor features to be enabled and made available to the user.
				Essentials, Heading, Bold, Italic, Underline,
				Link, Paragraph, Table, TableToolbar,

				// Your custom plugin implementing the widget is loaded here.
				ProductPreviewEditing
			],
			toolbar: {
				items: [
					'heading',
					'|',
					'bold', 'italic', 'underline',
					'|',
					'link', 'insertTable',
					'|',
					'undo', 'redo'
				]
			},
			ui: {
				viewportOffset: {
					top: window.getViewportTopOffsetConfig()
				}
			},
			table: {
				contentToolbar: [
					'tableColumn',
					'tableRow',
					'mergeTableCells'
				]
			},
			// The configuration of the Products plugin. It specifies a function that will allow
			// the editor to render a React <ProductPreview> component inside a product widget.
			products: {
				productRenderer: ( id, domElement ) => {
					const product = this.props.products.find( product => product.id === id );

					ReactDOM.render(
						<ProductPreview id={id} {...product} />,
						domElement
					);
				}
			}
		};

		this.handleEditorDataChange = this.handleEditorDataChange.bind( this );
		this.handleEditorReady = this.handleEditorReady.bind( this );
	}

	// A handler executed when the user types or modifies the editor content.
	// It updates the state of the application.
	handleEditorDataChange( evt, editor ) {
		this.setState( {
			editorData: editor.getData()
		} );
	}

	// A handler executed when the editor has been initialized and is ready.
	// It synchronizes the initial data state and saves the reference to the editor instance.
	handleEditorReady( editor ) {
		this.editor = editor;

		this.setState( {
			editorData: editor.getData()
		} );
	}

	render() {
		return [
			// The application renders two columns:
			// * in the left one, the <CKEditor> and the textarea displaying live
			//   editor data are rendered.
			// * in the right column, a <ProductList> is rendered with available <ProductPreviews>
			//   to choose from.
			<div className="app__offer-editor" key="offer-editor">
				<h3>Product offer editor</h3>
				<CKEditor
					editor={ClassicEditor}
					data={this.state.editorData}
					config={this.editorConfig}
					onChange={this.handleEditorDataChange}
					onReady={this.handleEditorReady}
				/>

				<h4>Editor data</h4>
				<textarea value={this.state.editorData} readOnly={true}></textarea>
			</div>,
			<ProductList
				key="product-list"
				products={this.props.products}
				onClick={( id ) => {
					this.editor.execute( 'insertProduct', id );
					this.editor.editing.view.focus();
				}}
			/>
		];
	}
}

// Render the <App> in the <div class="app"></div> element found in the DOM.
ReactDOM.render(
	<App
		// Feeding the application with predefined products.
		// In a real-life application, this sort of data would be loaded
		// from a database. To keep this tutorial simple, a few
		//  hard–coded product definitions will be used.
		products={[
			{
				id: 1,
				name: 'Colors of summer in Poland',
				price: '$1500',
				image: 'https://ckeditor.com/docs/ckeditor5/latest/assets/img/fields.jpg'
			},
			{
				id: 2,
				name: 'Mediterranean sun on Malta',
				price: '$1899',
				image: 'https://ckeditor.com/docs/ckeditor5/latest/assets/img/malta.jpg'
			},
			{
				id: 3,
				name: 'Tastes of Asia',
				price: '$2599',
				image: 'https://ckeditor.com/docs/ckeditor5/latest/assets/img/umbrellas.jpg'
			},
			{
				id: 4,
				name: 'Exotic India',
				price: '$2200',
				image: 'https://ckeditor.com/docs/ckeditor5/latest/assets/img/tajmahal.jpg'
			}
		]}
	/>,
	document.querySelector( '.app' )
);
</script>
</div>
<h2 id="detailed-guide"><a class="headerlink" href="#detailed-guide">#</a> Detailed guide</h2>
<p>If you would like to create such a widget on your own, take a look at the <a href="../../framework/guides/tutorials/using-react-in-a-widget.html">dedicated tutorial</a> which shows how to achieve this step by step with the source code provided.</p>
<h2 id="editor-example-configuration"><a class="headerlink" href="#editor-example-configuration">#</a> Editor example configuration</h2>
<details>
<summary>View editor configuration script</summary>
<pre class="highlight"><code class="js">/**
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md or https://ckeditor.com/legal/ckeditor-oss-license
 */

/* global window */

import Babel from 'babel-standalone';

// Imports necessary to run a React application.
import React from 'react';
import ReactDOM from 'react-dom';

// The official &lt;CKEditor&gt; component for React.
import { CKEditor } from '@ckeditor/ckeditor5-react';

// The base editor class and features required to run the editor.
import ClassicEditor from '@ckeditor/ckeditor5-editor-classic/src/classiceditor';
import Essentials from '@ckeditor/ckeditor5-essentials/src/essentials';
import Heading from '@ckeditor/ckeditor5-heading/src/heading';
import Bold from '@ckeditor/ckeditor5-basic-styles/src/bold';
import Italic from '@ckeditor/ckeditor5-basic-styles/src/italic';
import Underline from '@ckeditor/ckeditor5-basic-styles/src/underline';
import Link from '@ckeditor/ckeditor5-link/src/link';
import Table from '@ckeditor/ckeditor5-table/src/table';
import TableToolbar from '@ckeditor/ckeditor5-table/src/tabletoolbar';
import Paragraph from '@ckeditor/ckeditor5-paragraph/src/paragraph';
import Command from '@ckeditor/ckeditor5-core/src/command';
import Plugin from '@ckeditor/ckeditor5-core/src/plugin';
import { toWidget } from '@ckeditor/ckeditor5-widget/src/utils';
import Widget from '@ckeditor/ckeditor5-widget/src/widget';

// ckeditor/productpreviewediting.js

class ProductPreviewEditing extends Plugin {
    static get requires() {
        return [ Widget ];
    }

    init() {
        this._defineSchema();
        this._defineConverters();

        this.editor.commands.add( 'insertProduct', new InsertProductPreviewCommand( this.editor ) );
    }

    _defineSchema() {
        const schema = this.editor.model.schema;

        schema.register( 'productPreview', {
            // Behaves like a self-contained object (e.g. an image).
            isObject: true,

            // Allow in places where other blocks are allowed (e.g. directly in the root).
            allowWhere: '$block',

            // Each product preview has an ID. A unique ID tells the application which
            // product it represents and makes it possible to render it inside a widget.
            allowAttributes: [ 'id' ]
        } );
    }

    _defineConverters() {
        const editor = this.editor;
        const conversion = editor.conversion;
        const renderProduct = editor.config.get( 'products' ).productRenderer;

        // &lt;productPreview&gt; converters ((data) view → model)
        conversion.for( 'upcast' ).elementToElement( {
            view: {
                name: 'section',
                classes: 'product'
            },
            model: ( viewElement, { writer: modelWriter } ) =&gt; {
                // Read the "data-id" attribute from the view and set it as the "id" in the model.
                return modelWriter.createElement( 'productPreview', {
                    id: parseInt( viewElement.getAttribute( 'data-id' ) )
                } );
            }
        } );

        // &lt;productPreview&gt; converters (model → data view)
        conversion.for( 'dataDowncast' ).elementToElement( {
            model: 'productPreview',
            view: ( modelElement, { writer: viewWriter } ) =&gt; {
                // In the data view, the model &lt;productPreview&gt; corresponds to:
                //
                // &lt;section class="product" data-id="..."&gt;&lt;/section&gt;
                return viewWriter.createEmptyElement( 'section', {
                    class: 'product',
                    'data-id': modelElement.getAttribute( 'id' )
                } );
            }
        } );

        // &lt;productPreview&gt; converters (model → editing view)
        conversion.for( 'editingDowncast' ).elementToElement( {
            model: 'productPreview',
            view: ( modelElement, { writer: viewWriter } ) =&gt; {
                // In the editing view, the model &lt;productPreview&gt; corresponds to:
                //
                // &lt;section class="product" data-id="..."&gt;
                //     &lt;div class="product__react-wrapper"&gt;
                //         &lt;ProductPreview /&gt; (React component)
                //     &lt;/div&gt;
                // &lt;/section&gt;
                const id = modelElement.getAttribute( 'id' );

                // The outermost &lt;section class="product" data-id="..."&gt;&lt;/section&gt; element.
                const section = viewWriter.createContainerElement( 'section', {
                    class: 'product',
                    'data-id': id
                } );

                // The inner &lt;div class="product__react-wrapper"&gt;&lt;/div&gt; element.
                // This element will host a React &lt;ProductPreview /&gt; component.
                const reactWrapper = viewWriter.createRawElement( 'div', {
                    class: 'product__react-wrapper'
                }, function( domElement ) {
                    // This the place where React renders the actual product preview hosted
                    // by a UIElement in the view. you are using a function (renderer) passed as
                    // editor.config.products#productRenderer.
                    renderProduct( id, domElement );
                } );

                viewWriter.insert( viewWriter.createPositionAt( section, 0 ), reactWrapper );

                return toWidget( section, viewWriter, { label: 'product preview widget' } );
            }
        } );
    }
}

// ckeditor/insertproductpreviewcommand.js

class InsertProductPreviewCommand extends Command {
    execute( id ) {
        this.editor.model.change( writer =&gt; {
            // Insert &lt;productPreview id="..."&gt;*&lt;/productPreview&gt; at the current selection position
            // in a way which will result in creating a valid model structure.
            this.editor.model.insertContent( writer.createElement( 'productPreview', { id } ) );
        } );
    }

    refresh() {
        const model = this.editor.model;
        const selection = model.document.selection;
        const allowedIn = model.schema.findAllowedParent( selection.getFirstPosition(), 'productPreview' );

        this.isEnabled = allowedIn !== null;
    }
}

Object.assign( window, {
    Babel,
    React,
    ReactDOM,
    CKEditor,
    ClassicEditor,
    Essentials,
    Heading,
    Bold,
    Italic,
    Underline,
    Link,
    Table,
    TableToolbar,
    Paragraph,
    ProductPreviewEditing,
    InsertProductPreviewCommand
} );
</code></pre>
</details>
<details>
<summary>View editor content listing</summary>
<pre class="highlight"><code class="html">&lt;style&gt;
/* assets/styles.css */

/* --- General application styles --------------------------------------------------- */

.app {
    display: flex;
    flex-direction: row;
    justify-content: center;
}

.app textarea {
    width: 100%;
    height: 300px;
    font-family: 'Courier New', Courier, monospace;
    box-sizing: border-box;
    font-size: 14px;
}

/* --- Product offer editor styles ----------------------------------------------------- */

.app .app__offer-editor {
    flex: 1 1 auto;
}

/* --- Generic product preview styles --------------------------------------------------- */

.app .product-preview {
    background-repeat: no-repeat;
    background-position: center;
    background-image: var(--product-image);
    background-size: cover;
    height: 120px;
    position: relative;
    overflow: hidden;
    box-shadow: 1px 1px 3px hsla(0, 0%, 0%, .3);
    min-width: 120px;
}

.app .product-preview .product-preview__name {
    padding: 10px;
    background: hsl(0, 0%, 100%);
    font-weight: bold;
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    line-height: 1.5em;
}

.app .product-preview .product-preview__price {
    position: absolute;
    top: 0;
    right: 0;
    display: block;
    background: hsl(346, 100%, 56%);
    padding: 6px 10px;
    min-width: 50px;
    text-align: center;
    color: hsl(0, 0%, 100%);
    text-transform: uppercase;
    font-size: .8em;
    line-height: 1.5em;
}

.app .product-preview .product-preview__add {
    display: none;
}

/* --- Product list styles --------------------------------------------------- */

.app .app__product-list {
    margin-left: 20px;
    padding: 0 20px;
    border-left: 1px solid hsl(0, 0%, 87%);
}

.app .app__product-list ul {
    display: grid;
    grid-template-columns: 1fr;
    grid-gap: 10px;
    list-style-type: none;
    margin: 1.5em 0;
    padding: 0;
}

.app .app__product-list .product-preview {
    opacity: .7;
}

.app .app__product-list .product-preview:hover {
    opacity: 1;
}

.app .app__product-list .product-preview:hover .product-preview__add {
    display: block;
}

.app .app__product-list .product-preview .product-preview__add {
    display: none;
    position: absolute;
    width: 40px;
    height: 40px;
    top: 45%;
    left: 50%;

    border: 0;
    padding: 0;
    cursor: pointer;
    font-weight: bold;
    text-align: center;
    border-radius: 100px;
    background: hsl(0, 0%, 100%);
    transform: translate(-50%, -50%);
    box-shadow: 2px 2px 2px hsla(0, 0%, 0%, .3);
}

.app .app__product-list .product-preview .product-preview__add span {
    font-size: 25px;
    vertical-align: middle;
    color: hsl(0, 0%, 24%);
    line-height: 40px;
    display: inline-block;
}

.app .app__product-list .product-preview .product-preview__name {
    font-size: 10px;
}

.app .app__product-list .product-preview .product-preview__price {
    font-size: 10px;
}

/* --- In-editor product widget styles --------------------------------------------------- */

.app .ck-content .product {
    margin: 1em;
    animation: slideUp 0.3s ease;
}

@keyframes slideUp {
    0% {
        opacity: 0;
        transform: translateY(1em);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}
&lt;/style&gt;

&lt;div id="snippet-react-in-widget"&gt;
    &lt;div class="app"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;script type="text/babel"&gt;
// react/productpreview.js

class ProductPreview extends React.Component {
    render() {
        const style = {
            '--product-image': `url(${ this.props.image })`
        };

        return &lt;div
            className="product-preview"
            style={style}&gt;
                &lt;button
                    className="product-preview__add"
                    onClick={() =&gt; this.props.onClick( this.props.id )}
                    title="Add to the offer"
                &gt;
                    &lt;span&gt;+&lt;/span&gt;
                &lt;/button&gt;
                &lt;span className="product-preview__name"&gt;{this.props.name}&lt;/span&gt;
                &lt;span className="product-preview__price"&gt;from {this.props.price}&lt;/span&gt;
            &lt;/div&gt;
    }
}

// react/productlist.js

class ProductList extends React.Component {
    render() {
        return &lt;div className="app__product-list"&gt;
            &lt;h3&gt;Products&lt;/h3&gt;
            &lt;ul&gt;
                {this.props.products.map( product =&gt; {
                    return &lt;li key={product.id}&gt;
                        &lt;ProductPreview
                            id={product.id}
                            onClick={this.props.onClick}
                            {...product}
                        /&gt;
                    &lt;/li&gt;;
                })}
            &lt;/ul&gt;
            &lt;p&gt;&lt;b&gt;Tip&lt;/b&gt;: Clicking the product will add it to the editor.&lt;/p&gt;
        &lt;/div&gt;;
    }
}

// app.js

// The React application class. It renders the editor and the product list.
class App extends React.Component {
    constructor( props ) {
        super( props );

        // A place to store the reference to the editor instance created by the &lt;CKEditor&gt; component.
        // The editor instance is created asynchronously and is only available when the editor is ready.
        this.editor = null;

        this.state = {
            // The initial editor data. It is bound to the editor instance and will change as
            // the user types and modifies the content of the editor.
            editorData: '&lt;h2&gt;Check out our last-minute deals!&lt;/h2&gt;&lt;p&gt;The capital city of &lt;a href="https://en.wikipedia.org/wiki/Malta"&gt;Malta&lt;/a&gt; is the top destination this summer. It’s home to cutting-edge contemporary architecture, baroque masterpieces, delicious local cuisine, and at least 8 months of sun.&lt;/p&gt;&lt;section class="product" data-id="2"&gt;&lt;/section&gt;&lt;p&gt;You’ll definitely love exploring &lt;a href="https://en.wikipedia.org/wiki/Warsaw"&gt;Warsaw&lt;/a&gt;! The best time to visit the city is July and August when it’s cool enough to not break a sweat and hot enough to enjoy summer. The city which has quite a combination of both old and modern textures is located by the river Vistula.&lt;/p&gt;&lt;section class="product" data-id="1"&gt;&lt;/section&gt;&lt;h3&gt;Other destinations&lt;/h3&gt;&lt;figure class="table"&gt;&lt;table&gt;&lt;thead&gt;&lt;tr&gt;&lt;th&gt;Destination&lt;/th&gt;&lt;th&gt;Trip details&lt;/th&gt;&lt;/tr&gt;&lt;/thead&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td&gt;&lt;section class="product" data-id="3"&gt;&lt;/section&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;Getting used to an entirely different culture can be challenging. While it’s also nice to learn about cultures online or from books, nothing comes close to experiencing cultural diversity in person. You learn to appreciate each and every single one of the differences while you become more culturally fluid. &lt;a href="http://ckeditor.com"&gt;Find out more...&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;&lt;section class="product" data-id="4"&gt;&lt;/section&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;/td&gt;&lt;td&gt;Tourists frequently admit that the Taj Mahal "simply cannot be described with words". And that’s probably true. The more you try the more speechless you become. Words give only a semblance of truth. &lt;a href="http://ckeditor.com"&gt;Find out more...&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;'
        };

        // The configuration of the &lt;CKEditor&gt; instance.
        this.editorConfig = {
            plugins: [
                // A set of editor features to be enabled and made available to the user.
                Essentials, Heading, Bold, Italic, Underline,
                Link, Paragraph, Table, TableToolbar,

                // Your custom plugin implementing the widget is loaded here.
                ProductPreviewEditing
            ],
            toolbar: {
                items: [
                    'heading',
                    '|',
                    'bold', 'italic', 'underline',
                    '|',
                    'link', 'insertTable',
                    '|',
                    'undo', 'redo'
                ]
            },
            ui: {
                viewportOffset: {
                    top: window.getViewportTopOffsetConfig()
                }
            },
            table: {
                contentToolbar: [
                    'tableColumn',
                    'tableRow',
                    'mergeTableCells'
                ]
            },
            // The configuration of the Products plugin. It specifies a function that will allow
            // the editor to render a React &lt;ProductPreview&gt; component inside a product widget.
            products: {
                productRenderer: ( id, domElement ) =&gt; {
                    const product = this.props.products.find( product =&gt; product.id === id );

                    ReactDOM.render(
                        &lt;ProductPreview id={id} {...product} /&gt;,
                        domElement
                    );
                }
            }
        };

        this.handleEditorDataChange = this.handleEditorDataChange.bind( this );
        this.handleEditorReady = this.handleEditorReady.bind( this );
    }

    // A handler executed when the user types or modifies the editor content.
    // It updates the state of the application.
    handleEditorDataChange( evt, editor ) {
        this.setState( {
            editorData: editor.getData()
        } );
    }

    // A handler executed when the editor has been initialized and is ready.
    // It synchronizes the initial data state and saves the reference to the editor instance.
    handleEditorReady( editor ) {
        this.editor = editor;

        this.setState( {
            editorData: editor.getData()
        } );
    }

    render() {
        return [
            // The application renders two columns:
            // * in the left one, the &lt;CKEditor&gt; and the textarea displaying live
            //   editor data are rendered.
            // * in the right column, a &lt;ProductList&gt; is rendered with available &lt;ProductPreviews&gt;
            //   to choose from.
            &lt;div className="app__offer-editor" key="offer-editor"&gt;
                &lt;h3&gt;Product offer editor&lt;/h3&gt;
                &lt;CKEditor
                    editor={ClassicEditor}
                    data={this.state.editorData}
                    config={this.editorConfig}
                    onChange={this.handleEditorDataChange}
                    onReady={this.handleEditorReady}
                /&gt;

                &lt;h4&gt;Editor data&lt;/h4&gt;
                &lt;textarea value={this.state.editorData} readOnly={true}&gt;&lt;/textarea&gt;
            &lt;/div&gt;,
            &lt;ProductList
                key="product-list"
                products={this.props.products}
                onClick={( id ) =&gt; {
                    this.editor.execute( 'insertProduct', id );
                    this.editor.editing.view.focus();
                }}
            /&gt;
        ];
    }
}

// Render the &lt;App&gt; in the &lt;div class="app"&gt;&lt;/div&gt; element found in the DOM.
ReactDOM.render(
    &lt;App
        // Feeding the application with predefined products.
        // In a real-life application, this sort of data would be loaded
        // from a database. To keep this tutorial simple, a few
        //  hard–coded product definitions will be used.
        products={[
            {
                id: 1,
                name: 'Colors of summer in Poland',
                price: '$1500',
                image: '../../../assets/img/fields.jpg'
            },
            {
                id: 2,
                name: 'Mediterranean sun on Malta',
                price: '$1899',
                image: '../../../assets/img/malta.jpg'
            },
            {
                id: 3,
                name: 'Tastes of Asia',
                price: '$2599',
                image: '../../../assets/img/umbrellas.jpg'
            },
            {
                id: 4,
                name: 'Exotic India',
                price: '$2200',
                image: '../../../assets/img/tajmahal.jpg'
            }
        ]}
    /&gt;,
    document.querySelector( '.app' )
);
&lt;/script&gt;
</code></pre>
</details>
          <div class="info-box notice notice__feedback">
            <p>
              Every day, we work hard to keep our documentation complete. Have you spotted outdated information? Is something missing?
              Please report it via our <a href="https://github.com/ckeditor/ckeditor5/issues/new?labels=squad%3Accx%2Ctype%3Adocs&amp;template=7-docs-issue-community.yml&amp;title=Docs+issue+report+from+%22examples%2Fframework%2Fusing-react-in-a-widget.html%22&amp;project-version=35.4.0" id="report-widget-issue-tracker">issue tracker</a>.
            </p>
          </div>
          <script>
            ( () => {
                const issueTracker = document.getElementById( 'report-widget-issue-tracker' );
                const hrefUrl = new URL( issueTracker.href );
                hrefUrl.searchParams.set( 'user-agent', navigator.userAgent )
                hrefUrl.searchParams.set( 'origin-url', location.href )
                issueTracker.href = hrefUrl.toString();
            } )();
          </script>
        </div>
      </section>
      <div class="side-navigation">
        <div class="side-navigation__wrapper">
          <nav class="side-navigation__inner">
            <ul class="tree guide-tree">
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Predefined builds</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="../builds/classic-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Classic editor</span>
                                        </div></a></li>
                                    <li><a href="../builds/inline-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Inline editor</span>
                                        </div></a></li>
                                    <li><a href="../builds/balloon-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Balloon editor</span>
                                        </div></a></li>
                                    <li><a href="../builds/balloon-block-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Balloon block editor</span>
                                        </div></a></li>
                                    <li><a href="../builds/document-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Document editor</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Custom builds</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="../builds-custom/full-featured-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Full-featured editor</span>
                                        </div></a></li>
                                    <li><a href="../builds-custom/bottom-toolbar-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Bottom toolbar with formatting options grouped</span>
                                        </div></a></li>
                            </ul>
                          </li>
                          <li>
                            <div class="tree__item__wrapper"><span class="tree__item--folder tree__item__text">Framework</span>
                            </div>
                            <ul class="tree__item-nested-list">
                                    <li><a href="chat-with-mentions.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Chat with mentions</span>
                                        </div></a></li>
                                    <li><a href="theme-customization.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Theme customization</span>
                                        </div></a></li>
                                    <li><a href="custom-ui.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Custom UI (with Bootstrap)</span>
                                        </div></a></li>
                                    <li><a href="multi-root-editor.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Multi-root editor</span>
                                        </div></a></li>
                                    <li><a href="data-from-external-source.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Data from an external source</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                        </div></a></li>
                                    <li><a href="">
                                        <div class="tree__item__wrapper tree__item__wrapper--active"><span class="tree__item--guide tree__item__text">Using a React component in a block widget</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                        </div></a></li>
                                    <li><a href="inline-widget.html">
                                        <div class="tree__item__wrapper"><span class="tree__item--guide tree__item__text">Inline widget</span><span class="tree__item__badge tree__item__badge_new" data-badge-tooltip="New or updated content">New</span>
                                        </div></a></li>
                            </ul>
                          </li>
            </ul>
          </nav>
        </div>
      </div>
    </main>
    <footer class="footer">
      <p>&copy; 2003-2022 <a href="http://cksource.com">CKSource</a>. All rights reserved.</p>
    </footer>
    <script src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script><script type="text/javascript">
docsearch({
apiKey:'fc463c26455365ad403d5ec51796cd73',indexName:'ckeditor_nightly',inputSelector:'#docsearch_input',algoliaOptions:{hitsPerPage:250,attributesToRetrieve:'*'},
transformData: function( hits ) {var sortingFn = function( a, b ) {a.custom_ranking = a.custom_ranking || 0;b.custom_ranking = b.custom_ranking || 0;if ( a.custom_ranking === b.custom_ranking ) return a.index - b.index;if ( a.custom_ranking > b.custom_ranking ) return -1;if ( a.custom_ranking < b.custom_ranking ) return 1;};var result = [];var tags = [ 'installation', 'features', 'examples', 'updating', 'support', 'framework', 'api' ];var hitsGrouped = { api: [] };hitsGrouped[ 'examples' ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( 'examples' );} ).slice( 0, 7 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn );tags.forEach( function( tag ) {if ( tag !== 'examples' ) {hitsGrouped[ tag ] = hits.filter( function( h ) {return h.tags.includes( 'ckeditor5' ) && h.tags.includes( tag );} ).slice( 0, 10 ).map( function( item, idx ) {item.index = idx;return item;} ).sort( sortingFn ).slice( 0, 3 );}} );var apiSearchHits = [];if ( window.apiSearch ) apiSearchHits = window.apiSearch();hitsGrouped.api = hitsGrouped.api.filter( function( h ) {var isDuplicated = false;for ( var i = 0; i < apiSearchHits.length; i++ ) {if ( h.url.includes( apiSearchHits[ i ].urlShort ) ) {isDuplicated = true;break;}}return !isDuplicated;} );hitsGrouped.api = ( apiSearchHits || [] ).concat( hitsGrouped.api );result = result.concat( hitsGrouped[ 'examples' ] );tags.forEach( function( tag ) {if ( tag !== 'examples' ) result = result.concat( hitsGrouped[ tag ].slice( 0, 4 ) );} );return result;}
});
</script>
    <script src="../../../../assets/2.2.0/scripts/app.js"></script>
    <script src="../../assets/snippet.js"></script>
    <script src="../../snippets/assets.js"></script>
    <script src="../../snippets/framework/tutorials/using-react-in-widget/snippet.js"></script>
    <script src="../../assets/buildwarningbanner.js" async></script>
  </body>
</html>